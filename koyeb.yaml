# Koyeb Configuration for USCardForum MCP Server
# Deploy: koyeb app create uscardforum-mcp --docker uscardforum-mcp
# Or connect GitHub for auto-deploy
# Docs: https://www.koyeb.com/docs/

name: uscardforum-mcp

# Build from Dockerfile
docker:
  dockerfile: Dockerfile

# Service configuration
services:
  - name: web
    # Instance type
    instance_type: nano  # $5.47/mo, 256MB RAM (or use micro for 512MB)
    
    # Scaling
    scaling:
      min: 0
      max: 1
    
    # Health check
    health_checks:
      - http:
          path: /health
          port: 8000
        grace_period: 30
        interval: 30
        timeout: 5
    
    # Port configuration
    ports:
      - port: 8000
        protocol: http
    
    # Environment variables
    env:
      - key: MCP_TRANSPORT
        value: streamable-http
      - key: MCP_HOST
        value: "0.0.0.0"
      - key: MCP_PORT
        value: "8000"
      - key: USCARDFORUM_URL
        value: https://www.uscardforum.com
      - key: USCARDFORUM_TIMEOUT
        value: "15.0"
      # Secrets - set via Koyeb dashboard
      # - key: NITAN_TOKEN
      #   secret: nitan-token
      # - key: NITAN_USERNAME
      #   secret: nitan-username
      # - key: NITAN_PASSWORD
      #   secret: nitan-password

regions:
  - was  # Washington DC (or: fra, sin, sao)

